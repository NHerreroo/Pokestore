<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Colección de Cartas Pokémon</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Pokémon Competitive CSS -->
  <link rel="stylesheet" th:href="@{/pokemon-style.css}">
</head>
<body>
<div class="container mt-4 mb-5">
  <header class="pokemon-header p-3">
    <div class="d-flex justify-content-center align-items-center">
      <svg class="header-icon me-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20Z" fill="#5bc0be"/>
        <path d="M12 10.5C11.17 10.5 10.5 11.17 10.5 12C10.5 12.83 11.17 13.5 12 13.5C12.83 13.5 13.5 12.83 13.5 12C13.5 11.17 12.83 10.5 12 10.5Z" fill="#5bc0be"/>
      </svg>
      <h1 class="mb-0">Colección de Cartas Pokémon</h1>
      <svg class="header-icon ms-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4C16.42 4 20 7.58 20 12C20 16.42 16.42 20 12 20Z" fill="#5bc0be"/>
        <path d="M12 10.5C11.17 10.5 10.5 11.17 10.5 12C10.5 12.83 11.17 13.5 12 13.5C12.83 13.5 13.5 12.83 13.5 12C13.5 11.17 12.83 10.5 12 10.5Z" fill="#5bc0be"/>
      </svg>
    </div>
  </header>

  <!-- Formulario de búsqueda -->
  <div class="search-box mx-auto mb-4">
    <div class="card">
      <div class="card-body">
        <form th:action="@{/cards/buscar}" method="post" class="d-flex">
          <input type="text" class="form-control me-2" name="cardId"
                 th:value="${cardId}" placeholder="Ingresa el ID de la carta" required>
          <button class="btn btn-primary" type="submit">Buscar</button>
        </form>
        <div th:if="${error}" class="alert alert-danger mt-2" th:text="${error}"></div>
      </div>
    </div>
  </div>

  <!-- Tabla de cartas -->
  <div class="card mb-4">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table">
          <thead class="table-header">
          <tr>
            <th>ID</th>
            <th>Imagen</th>
            <th>Nombre</th>
            <th>Tipo</th>
            <th>Precio</th>
            <th>Vida</th>
            <th>Rareza</th>
            <th class="text-center">Acciones</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="carta : ${cartas}">
            <td th:text="${carta.id}"></td>
            <td>
              <div class="card-img-container">
                <img th:src="${carta.foto}" alt="Imagen de la carta" class="card-img">
              </div>
            </td>
            <td>
              <span th:text="${carta.nombre}" class="card-name"></span>
            </td>
            <td>
              <span th:text="${carta.tipo}" class="type-badge"></span>
            </td>
            <td th:text="${'$' + #numbers.formatDecimal(carta.precio, 1, 2)}"></td>
            <td>
              <div class="hp-bar">
                <div class="hp-progress" style="width: 100%;"></div>
              </div>
              <div class="hp-text" th:text="${carta.vida + ' HP'}"></div>
            </td>
            <td>
              <span th:text="${carta.rareza}" class="rarity-badge"></span>
            </td>
            <td class="text-center">
              <form th:action="@{/cards/eliminar/{id}(id=${carta.id})}" method="post">
                <button type="submit" class="btn btn-danger btn-sm"
                        onclick="return confirm('¿Estás seguro de que quieres eliminar esta carta?')">
                  Eliminar
                </button>
              </form>
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <!-- Mensaje cuando no hay cartas -->
      <div th:if="${#lists.isEmpty(cartas)}" class="no-cards-message">
        <p>No hay cartas en tu colección. Utiliza el buscador para añadir nuevas cartas.</p>
        <button class="btn btn-primary">Explorar cartas</button>
      </div>
    </div>
  </div>

  <footer class="footer text-center p-3">
    <p class="mb-0">Pokémon TCG Manager</p>
  </footer>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>